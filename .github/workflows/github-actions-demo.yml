name: ğŸŒŸ Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ CI/CD Workflow ğŸŒˆ

on: [push]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [ 14.x, 16.x]
    steps:
    - uses: actions/checkout@v2
    - name: ğŸ‰ Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v2
      with:
        node-version: ${{ matrix.node-version }}
    - name: ğŸš€ Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
      run: npm install
    - name: ğŸŒ Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ñ–Ğ²
      run: npm run test    
    - name: ğŸ“Š Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ²Ñ–Ñ‚Ñƒ Ğ¿Ñ€Ğ¾ Ğ¿Ğ¾ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ ĞºĞ¾Ğ´Ñƒ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸ Ğ² Coveralls
      uses: coverallsapp/github-action@master
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
    - name: ğŸ¨ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ Ğ· ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¼Ğ¸ ĞµĞ¼Ğ¾Ğ´Ğ·Ñ–
      run: "echo 'Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ñ–Ğ»Ğ´Ñƒ: ğŸŸ¢ Ğ£Ğ¡ĞŸĞ†Ğ¥ Ğ°Ğ±Ğ¾ ğŸ”´ ĞŸĞĞœĞ˜Ğ›ĞšĞ'"
    - name: ğŸ“¦ Ğ‘Ñ–Ğ»Ğ´ Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºÑƒ
      run: npm run build
    - name: ğŸš¢ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹Ğ¼ĞµĞ½Ñ‚ Ğ½Ğ° GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./build
    - name: ğŸ“¢ Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹
      uses: actions/github-script@v3
      with:
        script: |
          github.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: 'ğŸš€ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾! ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ñ‚Ğµ Ğ²Ğ°Ñˆ [GitHub Pages](https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}) ğŸŒ'
          })
